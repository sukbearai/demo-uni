require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/users/staff_list/index"],{3545:function(t,e,i){"use strict";var n=i("d8b6"),o=i.n(n);o.a},4687:function(t,e,i){"use strict";i.r(e);var n=i("829e"),o=i.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e["default"]=o.a},"829e":function(t,e,i){"use strict";(function(t){var n=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i("e97d"),s=i("88d5"),c=i("26cb"),u=n(i("0e62")),r={components:{authorize:function(){i.e("components/Authorize").then(function(){return resolve(i("e29b"))}.bind(null,i)).catch(i.oe)},home:function(){Promise.all([i.e("common/vendor"),i.e("components/home/index")]).then(function(){return resolve(i("aa1a"))}.bind(null,i)).catch(i.oe)},zbCode:function(){Promise.all([i.e("common/vendor"),i.e("components/zb-code/zb-code")]).then(function(){return resolve(i("ae25"))}.bind(null,i)).catch(i.oe)}},mixins:[u.default],data:function(){return{total:0,totalLevel:0,agent_percent:null,teamCount:0,page:1,limit:20,keyword:"",sort:"",grade:0,uid:0,status:!1,recordList:[],refund_close:!1,isAuto:!1,isShowAuth:!1,codeShow:!1,cid:"1",ifShow:!0,val:"",size:400,unit:"upx",background:"#FFF",foreground:"#000",pdground:"#000",icon:"",iconsize:70,lv:3,onval:!0,loadMake:!0,src:"",codeSrc:"",codeModal:!1}},computed:(0,c.mapGetters)(["isLogin"]),onLoad:function(){this.isLogin?this.userSpreadNewList():(0,s.toLogin)()},onShow:function(){this.is_show&&this.userSpreadNewList()},onHide:function(){this.is_show=!0},methods:{qrR:function(t){this.codeSrc=t},showCode:function(){this.codeModal=!0},posterImageClose:function(){this.codeModal=!1},onLoadFun:function(t){this.userSpreadNewList()},authColse:function(t){this.isShowAuth=t},setSort:function(t){this.sort=t,this.page=1,this.limit=20,this.status=!1,this.$set(this,"recordList",[]),this.userSpreadNewList()},submitForm:function(){this.page=1,this.limit=20,this.status=!1,this.$set(this,"recordList",[]),this.userSpreadNewList()},clear:function(e,i){var n=this;t.showModal({title:n.$t("删除员工"),content:n.$t("确定删除该员工?"),success:function(t){if(t.confirm)(0,o.delClerkPercent)(e.uid).then((function(t){return n.recordList.splice(i,1),n.$set(n,"recordList",n.recordList),n.$util.Tips({title:n.$t("删除成功"),icon:"success"})})).catch((function(t){return n.$util.Tips({title:t})}));else if(t.cancel)return n.$util.Tips({title:n.$t("已取消")})}})},changeData:function(t){this.refund_close=!0,this.uid=t.uid},refundSubmit:function(){var t=this;if(this.agent_percent<0)return this.$util.Tips({title:this.$t("请输入比例")});(0,o.setClerkPercent)({agent_percent:this.agent_percent,uid:this.uid}).then((function(e){t.$util.Tips({title:e.msg,icon:"success"},(function(){t.refund_close=!1,t.page=1,t.limit=20,t.keyword="",t.sort="",t.status=!1,t.$set(t,"recordList",[]),t.userSpreadNewList()}))})).catch((function(e){t.$util.Tips({title:e})}))},setType:function(t){this.grade!=t&&(this.grade=t,this.page=1,this.limit=20,this.keyword="",this.sort="",this.status=!1,this.$set(this,"recordList",[]),this.userSpreadNewList())},userSpreadNewList:function(){var t=this,e=t.page,i=t.limit,n=t.status,s=t.keyword,c=t.sort,u=t.grade,r=t.recordList,a=[];1!=n&&(0,o.clerkPeople)({page:e,limit:i,keyword:s,grade:u,sort:c}).then((function(n){var o=n.data.list.length,s=n.data.list;a=r.concat(s),t.total=n.data.total,t.totalLevel=n.data.totalLevel,t.teamCount=n.data.count,t.codeSrc=n.data.codeUrl,t.status=i>o,t.page=e+1,t.$set(t,"recordList",a)}))},downloadFilestoreImage:function(e){var i=this;return new Promise((function(n,o){var s=i;t.downloadFile({url:e,success:function(t){n(t.tempFilePath)},fail:function(){return s.$util.Tips({title:""})}})}))},savePosterPath:function(){var e=this;e.downloadFilestoreImage(e.codeSrc).then((function(i){t.getSetting({success:function(n){n.authSetting["scope.writePhotosAlbum"]?t.saveImageToPhotosAlbum({filePath:i,success:function(t){e.posterImageClose(),e.$util.Tips({title:e.$t("保存成功"),icon:"success"})},fail:function(t){e.$util.Tips({title:e.$t("保存失败")})}}):t.authorize({scope:"scope.writePhotosAlbum",success:function(){t.saveImageToPhotosAlbum({filePath:i,success:function(t){e.posterImageClose(),e.$util.Tips({title:e.$t("保存成功"),icon:"success"})},fail:function(t){e.$util.Tips({title:e.$t("保存失败")})}})}})}})}))}},onReachBottom:function(){this.userSpreadNewList()}};e.default=r}).call(this,i("543d")["default"])},"8dfa":function(t,e,i){"use strict";(function(t,e){var n=i("4ea4");i("363e");n(i("66fd"));var o=n(i("b64e"));t.__webpack_require_UNI_MP_PLUGIN__=i,e(o.default)}).call(this,i("bc2e")["default"],i("543d")["createPage"])},b64e:function(t,e,i){"use strict";i.r(e);var n=i("f5a4"),o=i("4687");for(var s in o)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(s);i("3545");var c=i("f0c5"),u=Object(c["a"])(o["default"],n["b"],n["c"],!1,null,"5b699668",null,!1,n["a"],void 0);e["default"]=u.exports},d8b6:function(t,e,i){},f5a4:function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return n}));var n={zbCode:function(){return Promise.all([i.e("common/vendor"),i.e("components/zb-code/zb-code")]).then(i.bind(null,"ae25"))}},o=function(){var t=this,e=t.$createElement,i=(t._self._c,t.$t("员工人数")),n=t.$t("邀请"),o=t.$t("人"),s=t.$t("加入时间"),c=t.$t("分佣比例"),u=t.$t("人"),r=t.$t("单"),a=t.$t("元"),l=t.$t("修改分佣比例"),d=t.$t("删除"),f=t.$t("修改分佣比例"),h=t.$t("请输入百分比"),m=t.$t("提交"),p=t.codeModal?t.$t("保存到手机"):null;t._isMounted||(t.e0=function(e){t.refund_close=!1},t.e1=function(e){t.refund_close=!1},t.e2=function(e){t.codeModal=!1}),t.$mp.data=Object.assign({},{$root:{m0:i,m1:n,m2:o,m3:s,m4:c,m5:u,m6:r,m7:a,m8:l,m9:d,m10:f,m11:h,m12:m,m13:p}})},s=[]}},[["8dfa","common/runtime","common/vendor"]]]);