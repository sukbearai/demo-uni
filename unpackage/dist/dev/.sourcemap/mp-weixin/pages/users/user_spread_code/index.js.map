{"version":3,"sources":["uni-app:///main.js","webpack:////Users/yangfan/Desktop/皮皮熊/麦8号/CRMEB-BZ v5.2.1(20231106)/template/uni-app/pages/users/user_spread_code/index.vue?28e5","webpack:////Users/yangfan/Desktop/皮皮熊/麦8号/CRMEB-BZ v5.2.1(20231106)/template/uni-app/pages/users/user_spread_code/index.vue?5ed5","webpack:////Users/yangfan/Desktop/皮皮熊/麦8号/CRMEB-BZ v5.2.1(20231106)/template/uni-app/pages/users/user_spread_code/index.vue?7402","webpack:////Users/yangfan/Desktop/皮皮熊/麦8号/CRMEB-BZ v5.2.1(20231106)/template/uni-app/pages/users/user_spread_code/index.vue?7d32","uni-app:///pages/users/user_spread_code/index.vue","webpack:////Users/yangfan/Desktop/皮皮熊/麦8号/CRMEB-BZ v5.2.1(20231106)/template/uni-app/pages/users/user_spread_code/index.vue?6803","webpack:////Users/yangfan/Desktop/皮皮熊/麦8号/CRMEB-BZ v5.2.1(20231106)/template/uni-app/pages/users/user_spread_code/index.vue?94bb"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","authorize","home","zbCode","mixins","data","imgUrls","indicatorDots","posterImageStatus","circular","autoplay","interval","duration","swiperIndex","spreadList","userInfo","poster","isAuto","isShowAuth","spreadData","nickName","siteName","mpUrl","canvasImageUrl","posterImage","codeShow","cid","ifShow","val","size","unit","background","foreground","pdground","icon","iconsize","lv","onval","loadMake","src","codeSrc","wd","hg","qrcode","computed","watch","isLogin","handler","deep","userData","onReady","selector","onShow","onHide","uni","onShareAppMessage","title","imageUrl","path","methods","getUser","onLoadFun","qrR","spreadMsgs","res","mask","i","that","arr2","tempFilePath","downloadImg","filePath","success","routineCode","imgToBase","image","code","codeImg","authColse","bindchange","savePosterPathMp","scope","fail","downloadFilestoreImage","url","resolve","setShareInfoStatus","desc","link","imgUrl","configAppMessage","userSpreadBannerList"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACc;;;AAGlE;AAC4N;AAC5N,gBAAgB,iNAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,wOAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC1CA;AAAA;AAAA;AAAA;AAA+3B,CAAgB,myBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;ACgDn5B;AAQA;AAGA;AAOA;AAIA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,eACA;EACAC;IAEAC;IAEAC;IACAC;EACA;EACAC;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MACAC;MACA;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;IACA;IACA;EACA;EACAC;IACAC;MACAC;QACA;UACA;QACA;MACA;MACAC;IACA;IACAC;MACAF;QACA;UACA;QACA;MACA;MACAC;IACA;EACA;EACAE;IAAA;IAAA;MAAA;QAAA;UAAA;YAAA;cAAA,KACA;gBAAA;gBAAA;cAAA;cACA;cAAA;cAAA,OACA;YAAA;cAAA;cAAA;YAAA;cAEA;YAAA;cAGA;gBACA;gBACAC;kBACAtB;gBACA;kBACA;kBACA;gBACA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EACA;EACAuB,2BAEA;EACAC;IACAC;EACA;EACA;AACA;AACA;EAEAC;IACA;MACAC;MACAC;MACAC;IACA;EACA;EAEAC;IACAC;MAAA;MACA;QACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OAEA;cAAA;gBAAAC;gBACA;gBACA;gBACA;gBAAA;gBAAA,OAEA;cAAA;gBAAA;gBAAA;gBAAA,OAGA;cAAA;gBAAA;gBAAA,OACA;cAAA;gBAAA1C;gBAEAgC;kBACAE;kBACAS;gBACA;gBAAA,8DAEAC;kBAAA;kBAAA;oBAAA;sBAAA;wBAAA;0BACAC;0BACAC;0BAAA,eAEA9C;0BAAA;0BAAA;wBAAA;0BAAA;0BAAA8C;0BAUAD,mFACA1B,IACA,qBACA4B;4BACAF;4BAEA;8BACA;gCACAX;8BACA;4BACA;0BAEA;wBAAA;wBAAA;0BAAA;sBAAA;oBAAA;kBAAA;gBAAA;gBA1BAU;cAAA;gBAAA;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBAAAA;gBAAA;gBAAA;cAAA;gBA4BAZ;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACAgB;MACAhB;QACAiB;QACAC;MACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACA;cAAA;gBAAAT;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAU;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACA;kBACAC;kBACAC;gBACA;cAAA;gBAHAZ;gBAAA,kCAIAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAa;MACA;IAAA,CACA;IACA;IACAC;MACA;IACA;IACAC;MACA;MACA;MACA;IACA;IAEAC;MACA;MACA1B;QACAkB;UACA;YACAlB;cACA2B;cACAT;gBACAlB;kBACAiB;kBACAC;oBACAL;sBACAX;sBACAtB;oBACA;kBACA;kBACAgD;oBACAf;sBACAX;oBACA;kBACA;gBACA;cACA;YACA;UACA;YACAF;cACAiB;cACAC;gBACAL;kBACAX;kBACAtB;gBACA;cACA;cACAgD;gBACAf;kBACAX;gBACA;cACA;YACA;UACA;QACA;MACA;IACA;IAqBA;IACA2B;MAAA;MACA;QACA;QACA7B;UACA8B;UACAZ;YACAa;UACA;UACAH;YACA;cACA1B;YACA;UACA;QACA;MACA;IACA;IACA8B;MAAA;MACA;QACA;UACA;YACA;cACAC;cACA/B;cACAgC;cACAC;YACA;YACA,qFACAC;UACA;QACA;UACA;QACA;MAEA;IACA;IACAC;MACA;MACArC;QACAE;QACAS;MACA;MACA;QACAX;QACAa;QACAA;MAIA;QACAb;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC1YA;AAAA;AAAA;AAAA;AAA8oD,CAAgB,k6CAAG,EAAC,C;;;;;;;;;;;ACAlqD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/users/user_spread_code/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/users/user_spread_code/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=5d8acc68&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/users/user_spread_code/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=5d8acc68&\"","var components\ntry {\n  components = {\n    zbCode: function () {\n      return import(\n        /* webpackChunkName: \"components/zb-code/zb-code\" */ \"@/components/zb-code/zb-code.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = _vm.$t(\"保存海报\")\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view :style=\"colorStyle\">\r\n\t\t<view class='distribution-posters'>\r\n\t\t\t<swiper :indicator-dots=\"indicatorDots\" :autoplay=\"autoplay\" :circular=\"circular\" :interval=\"interval\"\r\n\t\t\t\t:duration=\"duration\" @change=\"bindchange\" previous-margin=\"40px\" next-margin=\"40px\">\r\n\t\t\t\t<block v-for=\"(item,index) in spreadData\" :key=\"index\" class=\"img-list\">\r\n\t\t\t\t\t<swiper-item class=\"aaa\">\r\n\t\t\t\t\t\t<div class=\"box\" ref=\"bill\" :class=\"swiperIndex == index ? 'active' : 'quiet'\">\r\n\t\t\t\t\t\t\t<view class=\"user-msg\">\r\n\t\t\t\t\t\t\t\t<view class=\"user-code\">\r\n\t\t\t\t\t\t\t\t\t<image class=\"canvas\" :style=\"{height:hg+'px'}\" :src=\"posterImage[index]\"\r\n\t\t\t\t\t\t\t\t\t\tv-if=\"posterImage[index]\"></image>\r\n\t\t\t\t\t\t\t\t\t<canvas class=\"canvas\" :style=\"{height:hg+'px'}\" :canvas-id=\"'myCanvas'+ index\"\r\n\t\t\t\t\t\t\t\t\t\tv-else></canvas>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<!-- <image :src=\"item.wap_poster\" class=\"slide-image\" :class=\"swiperIndex == index ? 'active' : 'quiet'\" mode='aspectFill' /> -->\r\n\t\t\t\t\t</swiper-item>\r\n\t\t\t\t</block>\r\n\t\t\t</swiper>\r\n\t\t\t<!-- #ifndef H5  -->\r\n\t\t\t<view class='keep bg-color' @click='savePosterPathMp(posterImage[swiperIndex])'>{{$t(`保存海报`)}}</view>\r\n\t\t\t<!-- #endif -->\r\n\t\t\t<!-- #ifndef MP || APP-PLUS -->\r\n\t\t\t<div class=\"preserve acea-row row-center-wrapper\">\r\n\t\t\t\t<div class=\"line\"></div>\r\n\t\t\t\t<div class=\"tip\">{{$t(`长按保存图片`)}}</div>\r\n\t\t\t\t<div class=\"line\"></div>\r\n\t\t\t</div>\r\n\t\t\t<!-- #endif -->\r\n\t\t</view>\r\n\t\t<!-- #ifdef MP -->\r\n\t\t<!-- <authorize @onLoadFun=\"onLoadFun\" :isAuto=\"isAuto\" :isShowAuth=\"isShowAuth\" @authColse=\"authColse\"></authorize> -->\r\n\t\t<!-- #endif -->\r\n\t\t<!-- #ifndef MP -->\r\n\t\t<home></home>\r\n\t\t<!-- #endif -->\r\n\t\t<view class=\"qrimg\">\r\n\t\t\t<zb-code ref=\"qrcode\" :show=\"codeShow\" :cid=\"cid\" :val=\"val\" :size=\"size\" :unit=\"unit\"\r\n\t\t\t\t:background=\"background\" :foreground=\"foreground\" :pdground=\"pdground\" :icon=\"icon\" :iconSize=\"iconsize\"\r\n\t\t\t\t:onval=\"onval\" :loadMake=\"loadMake\" @result=\"qrR\" />\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport zbCode from '@/components/zb-code/zb-code.vue'\r\n\timport {\r\n\t\tgetUserInfo,\r\n\t\tspreadBanner,\r\n\t\tuserShare,\r\n\t\troutineCode,\r\n\t\tspreadMsg,\r\n\t\timgToBase\r\n\t} from '@/api/user.js';\r\n\timport {\r\n\t\ttoLogin\r\n\t} from '@/libs/login.js';\r\n\timport {\r\n\t\tmapGetters\r\n\t} from \"vuex\";\r\n\t// #ifdef MP\r\n\timport authorize from '@/components/Authorize';\r\n\t// #endif\r\n\timport home from '@/components/home';\r\n\timport {\r\n\t\tTOKENNAME,\r\n\t\tHTTP_REQUEST_URL\r\n\t} from '@/config/app.js';\r\n\timport colors from '@/mixins/color.js';\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\t// #ifdef MP\r\n\t\t\tauthorize,\r\n\t\t\t// #endif\r\n\t\t\thome,\r\n\t\t\tzbCode\r\n\t\t},\r\n\t\tmixins: [colors],\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\timgUrls: [],\r\n\t\t\t\tindicatorDots: false,\r\n\t\t\t\tposterImageStatus: true,\r\n\t\t\t\tcircular: false,\r\n\t\t\t\tautoplay: false,\r\n\t\t\t\tinterval: 3000,\r\n\t\t\t\tduration: 500,\r\n\t\t\t\tswiperIndex: 0,\r\n\t\t\t\tspreadList: [],\r\n\t\t\t\tuserInfo: {},\r\n\t\t\t\tposter: '',\r\n\t\t\t\tisAuto: false, //没有授权的不会自动授权\r\n\t\t\t\tisShowAuth: false, //是否隐藏授权\r\n\t\t\t\tspreadData: [{}], //新海报数据\r\n\t\t\t\tnickName: \"\",\r\n\t\t\t\tsiteName: \"\",\r\n\t\t\t\tmpUrl: \"\",\r\n\t\t\t\tcanvasImageUrl: '',\r\n\t\t\t\tposterImage: [],\r\n\t\t\t\t//二维码参数\r\n\t\t\t\tcodeShow: false,\r\n\t\t\t\tcid: '1',\r\n\t\t\t\tifShow: true,\r\n\t\t\t\tval: \"\", // 要生成的二维码值\r\n\t\t\t\tsize: 200, // 二维码大小\r\n\t\t\t\tunit: 'upx', // 单位\r\n\t\t\t\tbackground: '#FFF', // 背景色\r\n\t\t\t\tforeground: '#000', // 前景色\r\n\t\t\t\tpdground: '#000', // 角标色\r\n\t\t\t\ticon: '', // 二维码图标\r\n\t\t\t\ticonsize: 40, // 二维码图标大小\r\n\t\t\t\tlv: 3, // 二维码容错级别 ， 一般不用设置，默认就行\r\n\t\t\t\tonval: true, // val值变化时自动重新生成二维码\r\n\t\t\t\tloadMake: true, // 组件加载完成后自动生成二维码\r\n\t\t\t\tsrc: '', // 二维码生成后的图片地址或base64\r\n\t\t\t\tcodeSrc: \"\",\r\n\t\t\t\twd: 0,\r\n\t\t\t\thg: 0,\r\n\t\t\t\tqrcode: \"\"\r\n\t\t\t};\r\n\t\t},\r\n\t\tcomputed: mapGetters({\r\n\t\t\t'isLogin': 'isLogin',\r\n\t\t\t'userData': 'userInfo',\r\n\t\t\t'uid': 'uid'\r\n\t\t}),\r\n\t\twatch: {\r\n\t\t\tisLogin: {\r\n\t\t\t\thandler: function(newV, oldV) {\r\n\t\t\t\t\tif (newV) {\r\n\t\t\t\t\t\tthis.userSpreadBannerList();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tdeep: true\r\n\t\t\t},\r\n\t\t\tuserData: {\r\n\t\t\t\thandler: function(newV, oldV) {\r\n\t\t\t\t\tif (newV) {\r\n\t\t\t\t\t\tthis.$set(this, 'userInfo', newV);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tdeep: true\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync onReady() {\r\n\t\t\tif (this.isLogin) {\r\n\t\t\t\tthis.val = `${HTTP_REQUEST_URL}?spid=${this.uid}`\r\n\t\t\t\tawait this.getUser()\r\n\t\t\t} else {\r\n\t\t\t\ttoLogin();\r\n\r\n\t\t\t}\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tlet selector = uni.createSelectorQuery().select('.aaa');\r\n\t\t\t\tselector.fields({\r\n\t\t\t\t\tsize: true\r\n\t\t\t\t}, data => {\r\n\t\t\t\t\tthis.wd = data.width\r\n\t\t\t\t\tthis.hg = data.height\r\n\t\t\t\t}).exec();\r\n\t\t\t})\r\n\t\t},\r\n\t\tonShow() {\r\n\r\n\t\t},\r\n\t\tonHide() {\r\n\t\t\tuni.hideLoading();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 用户点击右上角分享\r\n\t\t */\r\n\t\t// #ifdef MP\r\n\t\tonShareAppMessage() {\r\n\t\t\treturn {\r\n\t\t\t\ttitle: this.userInfo.nickname + '-' + this.$t(`分销海报`),\r\n\t\t\t\timageUrl: this.spreadList[0],\r\n\t\t\t\tpath: '/pages/index/index?spread=' + this.userInfo.uid,\r\n\t\t\t};\r\n\t\t},\r\n\t\t// #endif\r\n\t\tmethods: {\r\n\t\t\tgetUser() {\r\n\t\t\t\tgetUserInfo().then(res => {\r\n\t\t\t\t\tthis.userInfo = res.data\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tonLoadFun: function(e) {\r\n\t\t\t\tthis.$set(this, 'userInfo', e);\r\n\t\t\t\tthis.userSpreadBannerList();\r\n\t\t\t},\r\n\t\t\tqrR(res) {\r\n\t\t\t\tthis.codeSrc = res\r\n\t\t\t\tthis.spreadMsgs()\r\n\t\t\t},\r\n\t\t\t//获取图片\r\n\t\t\tasync spreadMsgs() {\r\n\r\n\t\t\t\tlet res = await spreadMsg()\r\n\t\t\t\tthis.spreadData = res.data.spread\r\n\t\t\t\tthis.nickName = res.data.nickname\r\n\t\t\t\tthis.siteName = res.data.site_name\r\n\t\t\t\t// #ifdef MP\r\n\t\t\t\tthis.qrcode = await this.imgToBase(res.data.qrcode)\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef MP\r\n\t\t\t\tawait this.routineCode()\r\n\t\t\t\tlet mpUrl = await this.downloadFilestoreImage(this.mpUrl)\r\n\t\t\t\t// #endif\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: this.$t(`海报生成中`),\r\n\t\t\t\t\tmask: true\r\n\t\t\t\t});\r\n\r\n\t\t\t\tfor (let i = 0; i < res.data.spread.length; i++) {\r\n\t\t\t\t\tlet that = this\r\n\t\t\t\t\tlet arr2, img\r\n\t\t\t\t\t// #ifdef MP\t\r\n\t\t\t\t\tarr2 = [mpUrl, await this.downloadFilestoreImage(res.data.spread[i].pic)]\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t\t// #ifdef H5\r\n\t\t\t\t\timg = await this.imgToBase(res.data.spread[i].pic, res.data.qrcode)\r\n\t\t\t\t\tarr2 = [img.code || this.codeSrc, img.image]\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\t\timg = await this.imgToBase(res.data.spread[i].pic, res.data.qrcode)\r\n\t\t\t\t\tarr2 = [img.code || this.codeSrc, res.data.spread[i].pic]\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t\tthat.$util.userPosterCanvas(arr2, res.data.nickname, res.data.site_name, i, this\r\n\t\t\t\t\t\t.wd,\r\n\t\t\t\t\t\tthis.hg, (\r\n\t\t\t\t\t\t\ttempFilePath) => {\r\n\t\t\t\t\t\t\tthat.$set(that.posterImage, i, tempFilePath);\r\n\t\t\t\t\t\t\t// #ifdef MP\r\n\t\t\t\t\t\t\tif (!that.posterImage.length) {\r\n\t\t\t\t\t\t\t\treturn that.$util.Tips({\r\n\t\t\t\t\t\t\t\t\ttitle: that.$t(`小程序二维码需要发布正式版后才能获取到`)\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tuni.hideLoading();\r\n\r\n\t\t\t},\r\n\t\t\tdownloadImg() {\r\n\t\t\t\tuni.saveImageToPhotosAlbum({\r\n\t\t\t\t\tfilePath: this.posterImage[this.swiperIndex],\r\n\t\t\t\t\tsuccess: function() {}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tasync routineCode() {\r\n\t\t\t\tlet res = await routineCode()\r\n\t\t\t\tthis.mpUrl = res.data.url\r\n\t\t\t},\r\n\t\t\tasync imgToBase(url, code) {\r\n\t\t\t\tlet res = await imgToBase({\r\n\t\t\t\t\timage: url,\r\n\t\t\t\t\tcode: code\r\n\t\t\t\t})\r\n\t\t\t\treturn res.data\r\n\t\t\t},\r\n\t\t\t// 二维码生成\r\n\t\t\tcodeImg() {\r\n\t\t\t\t// http://当前域名+\"?spread=\"+用户uid\r\n\t\t\t},\r\n\t\t\t// 授权关闭\r\n\t\t\tauthColse: function(e) {\r\n\t\t\t\tthis.isShowAuth = e\r\n\t\t\t},\r\n\t\t\tbindchange(e) {\r\n\t\t\t\tlet spreadList = this.spreadList;\r\n\t\t\t\tthis.swiperIndex = e.detail.current;\r\n\t\t\t\t// this.$set(this, 'poster', spreadList[e.detail.current].poster);\r\n\t\t\t},\r\n\t\t\t// #ifdef MP\r\n\t\t\tsavePosterPathMp(url) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tuni.getSetting({\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tif (!res.authSetting['scope.writePhotosAlbum']) {\r\n\t\t\t\t\t\t\tuni.authorize({\r\n\t\t\t\t\t\t\t\tscope: 'scope.writePhotosAlbum',\r\n\t\t\t\t\t\t\t\tsuccess() {\r\n\t\t\t\t\t\t\t\t\tuni.saveImageToPhotosAlbum({\r\n\t\t\t\t\t\t\t\t\t\tfilePath: url,\r\n\t\t\t\t\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t\t\t\t\tthat.$util.Tips({\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: that.$t(`保存成功`),\r\n\t\t\t\t\t\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\tfail: function(res) {\r\n\t\t\t\t\t\t\t\t\t\t\tthat.$util.Tips({\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: that.$t(`保存失败`),\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.saveImageToPhotosAlbum({\r\n\t\t\t\t\t\t\t\tfilePath: url,\r\n\t\t\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t\t\tthat.$util.Tips({\r\n\t\t\t\t\t\t\t\t\t\ttitle: that.$t(`保存成功`),\r\n\t\t\t\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail: function(res) {\r\n\t\t\t\t\t\t\t\t\tthat.$util.Tips({\r\n\t\t\t\t\t\t\t\t\t\ttitle: that.$t(`保存失败`),\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// #endif\r\n\t\t\t// #ifdef APP-PLUS\r\n\t\t\tsavePosterPathMp(url) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tuni.saveImageToPhotosAlbum({\r\n\t\t\t\t\tfilePath: url,\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tthat.$util.Tips({\r\n\t\t\t\t\t\t\ttitle: that.$t(`保存成功`),\r\n\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function(res) {\r\n\t\t\t\t\t\tthat.$util.Tips({\r\n\t\t\t\t\t\t\ttitle: that.$t(`保存失败`),\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// #endif\r\n\t\t\t//图片转符合安全域名路径\r\n\t\t\tdownloadFilestoreImage(url) {\r\n\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\tlet that = this;\r\n\t\t\t\t\tuni.downloadFile({\r\n\t\t\t\t\t\turl: url,\r\n\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\tresolve(res.tempFilePath);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: function() {\r\n\t\t\t\t\t\t\treturn that.$util.Tips({\r\n\t\t\t\t\t\t\t\ttitle: ''\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tsetShareInfoStatus: function() {\r\n\t\t\t\tif (this.$wechat.isWeixin()) {\r\n\t\t\t\t\tif (this.isLogin) {\r\n\t\t\t\t\t\tgetUserInfo().then(res => {\r\n\t\t\t\t\t\t\tlet configAppMessage = {\r\n\t\t\t\t\t\t\t\tdesc: this.$t(`分销海报`),\r\n\t\t\t\t\t\t\t\ttitle: res.data.nickname + '-' + this.$t(`分销海报`),\r\n\t\t\t\t\t\t\t\tlink: '/pages/index/index?spread=' + res.data.uid,\r\n\t\t\t\t\t\t\t\timgUrl: this.spreadList[0]\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tthis.$wechat.wechatEvevt([\"updateAppMessageShareData\", \"updateTimelineShareData\"],\r\n\t\t\t\t\t\t\t\tconfigAppMessage)\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttoLogin();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tuserSpreadBannerList: function() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: that.$t(`获取中`),\r\n\t\t\t\t\tmask: true,\r\n\t\t\t\t})\r\n\t\t\t\tspreadBanner().then(res => {\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\tthat.$set(that, 'spreadList', res.data);\r\n\t\t\t\t\tthat.$set(that, 'poster', res.data[0].poster);\r\n\t\t\t\t\t// #ifdef H5\r\n\t\t\t\t\tthat.setShareInfoStatus();\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t}).catch(err => {\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\tpage {\r\n\t\tbackground-color: #a3a3a3 !important;\r\n\t}\r\n\r\n\t.canvas {\r\n\t\twidth: 100%;\r\n\t\t// height: 550px;\r\n\t}\r\n\r\n\t.box {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tposition: relative;\r\n\t\tborder-radius: 18rpx;\r\n\t\toverflow: hidden;\r\n\r\n\t\t.user-msg {\r\n\t\t\tposition: absolute;\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 100%;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: center;\r\n\r\n\t\t\t.user-code {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\t// height: 100%;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\tjustify-content: space-between;\r\n\r\n\t\t\t\timage {\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.img-list {\r\n\t\tmargin-right: 40px;\r\n\t}\r\n\r\n\t.distribution-posters swiper {\r\n\t\twidth: 100%;\r\n\t\theight: 1000rpx;\r\n\t\tposition: relative;\r\n\t\tmargin-top: 40rpx;\r\n\t}\r\n\r\n\t.distribution-posters .slide-image {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tmargin: 0 auto;\r\n\t\tborder-radius: 15rpx;\r\n\t}\r\n\r\n\t.distribution-posters /deep/.active {\r\n\t\ttransform: none;\r\n\t\ttransition: all 0.2s ease-in 0s;\r\n\t}\r\n\r\n\t.distribution-posters /deep/ .quiet {\r\n\t\ttransform: scale(0.8333333);\r\n\t\ttransition: all 0.2s ease-in 0s;\r\n\t}\r\n\r\n\t.distribution-posters .keep {\r\n\t\tfont-size: 30rpx;\r\n\t\tcolor: #fff;\r\n\t\twidth: 600rpx;\r\n\t\theight: 80rpx;\r\n\t\tborder-radius: 50rpx;\r\n\t\ttext-align: center;\r\n\t\tline-height: 80rpx;\r\n\t\tmargin: 38rpx auto;\r\n\t}\r\n\r\n\t.distribution-posters .preserve {\r\n\t\tcolor: #fff;\r\n\t\ttext-align: center;\r\n\t\tmargin-top: 38rpx;\r\n\t}\r\n\r\n\t.distribution-posters .preserve .line {\r\n\t\twidth: 100rpx;\r\n\t\theight: 1px;\r\n\t\tbackground-color: #fff;\r\n\t}\r\n\r\n\t.distribution-posters .preserve .tip {\r\n\t\tmargin: 0 30rpx;\r\n\t}\r\n</style>\n","import mod from \"-!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1699920878586\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}